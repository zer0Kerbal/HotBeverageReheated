PART
{
	// Hot Beverage Inc. - Kerpollo Service Module
	// At your service! Sometimes at least...
	// 

// --- general parameters ---
	name = HB_ServiceModule_25
	module = Part
	author = ph34rb0t

	MODEL
	{
		model = HotBeveragesIrradiated/Parts/ServiceModule_25/KSM
		scale = 0.8,0.8,0.8
	}

	MODEL
	{
		model = HotBeveragesIrradiated/Parts/ServiceModule_25/KSP
		scale = 0.8, 0.8, 0.8
		position = 0.0, -2, 0.0
	}

	scale = 1

	// --- node definitions ---
	node_stack_top = 0.0, 1.96, 0.0, 0.0, 1.0, 0.0, 3
	node_stack_bottom = 0.0, -2 , 0.0, 0.0, -1.0, 0.0, 3

	// --- editor parameters ---
	TechRequired = specializedControl
	entryCost = 10000
	cost = 8000
	category = Propulsion
	subcategory = 0
	title = KSM Service Module (2.5m)
	manufacturer = Hot Beverage Inc.
	description = The Kerpollo Service Module. Contains rocket fuel, RCS fuel, fuel cells, batteries and deployable antennae. Everything you need for your interstellar adventures! Warranty void if oxygen tanks are not being stirred regularly. Contains engine with a good thrust to weight ratio, good fuel consumption, good price, good looking and good in bed. Fly me to the Mun, baby!

	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,0,1,1,0

	// --- standard part parameters ---
	mass = 0.960
	dragModelType = default
	maximum_drag = 0.3
	minimum_drag = 0.3
	angularDrag = 2
	
	//Fails at 30 tons at 5g ((30*5*9.81) /50)
	crashTolerance = 45 // 100
	breakingForce = 30
	breakingTorque = 60
	
	maxTemp = 2500
	skinMaxTemp = 2800
	thermalMassModifier = 1.0
	heatConductivity = 0.06
	emissiveConstant = 0.85 // engine nozzles are good at radiating, NTRs even better
	skinInternalConductionMult = 4.0
	radiatorMax = 0.35 //Default = 0.25 but nuke engines are meant to run hot

	fuelCrossFeed = true

	stagingIcon = LIQUID_ENGINE
	explosionPotential = 0.5

	stageOffset = 1
	childStageOffset = 1

	bulkheadProfiles = size2
	
	tags = service module active efficient engine inter liquid  orbit propuls radio vacuum kertun hot beverages

// Modules
	MODULE
	{
		name = ModuleToggleCrossfeed
		crossfeedStatus = false
		toggleEditor = true
		toggleFlight = true
	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = #autoLOC_502022 //#autoLOC_502022 = Fuel Cell
		StartActionName = #autoLOC_502023 //#autoLOC_502023 = Start Fuel Cell
		StopActionName = #autoLOC_502024 //#autoLOC_502024 = Stop Fuel Cell
		ToggleActionName = #autoLOC_502025 //#autoLOC_502025 = Toggle Fuel Cell
		FillAmount = 0.95
		AutoShutdown = false
		GeneratesHeat = true
		UseSpecialistBonus = true
// convert to monoprop?
		INPUT_RESOURCE
		{
			ResourceName = LiquidFuel
			Ratio = 0.0016875
			FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE
		{
			ResourceName = Oxidizer
			Ratio = 0.0020625
			FlowMode = STAGE_PRIORITY_FLOW
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.5
			DumpExcess = false
		}
	}

	// MODULE
	// {
		// name = ModuleDeployableAntenna // ModuleDeployablePart
		// showStatus = false
		// isTracking = false
		// pivotName = Rescalar
		// windResistance = 1
		// animationName = Antenna
		// extendActionName = Antennas Deploy // #autoLOC_6002398 //#autoLOC_6002398 = Extend <<1>>
		// retractActionName =  Antennas Stow // #autoLOC_6002399 //#autoLOC_6002399 = Retract <<1>>
		// extendPanelsActionName =  Antennas Toggle // #autoLOC_6002400 //#autoLOC_6002400 = Toggle <<1>>
		// stagingEnabled = True
	// }

	MODULE
	{
		name = ModuleAnimateGeneric
		animationName = Antenna
		animSwitch = true
		isOneShot = false
		startEventGUIName = Deploy Antennas
		endEventGUIName = Stow Antennas
		actionGUIName = Toggle Antenna
		allowAnimationWhileShielded = False
		animSpeed = 1000
		animSwitch = True
		stagingEnabled = True
	}

	MODULE
	{
		name = ModuleDataTransmitter
		antennaType = INTERNAL
		packetInterval = 0.18
		packetSize = 2
		packetResourceCost = 12.0 // 20.0
		requiredResource = ElectricCharge
		antennaPower = 500000
		optimumRange = 250000
		packetFloor = .1
		packetCeiling = 5
		DeployFxModules = 0
	}

	MODULE
	{
		name = ModuleEnginesFX
		engineID = LF // add
		EngineTYpe = LiquidFuel // add
		thrustVectorTransformName = thrustTransform
		runningEffectName = running_closed
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 32 // 23
		heatProduction = 100
		fxOffset = 0, 0, 0.8
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 0.9
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1.1
			DrawGauge = True
		}
		atmosphereCurve
		{
			key = 0 312
			key = 1 271
			key = 12 0.001
		}
	}

	// MODULE
	// {
		// name = ModuleAnimateHeat
		// ThermalAnim = engineHeat 
	// }

	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = thrustTransform
		gimbalRange = 1.0
 		gimbalResponseSpeed = 6
 		useGimbalResponseSpeed = true
	}

	MODULE
	{
		name = ModuleAlternator	
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.0
		}
	}

	MODULE
	{
		name = ModuleSAS
		SASServiceLevel = 3
	}

	MODULE
	{
		name = ModuleReactionWheel
		PitchTorque = 30 // 300
		YawTorque = 30 // 300
		RollTorque = 30 // 300
		torqueResponseSpeed = 5.0
		RESOURCE
		{
			name = ElectricCharge
			rate = 0.6
		}
	}

// Resources
	RESOURCE
	{
		name = MonoPropellant
		amount = 250
		maxAmount = 250
	}

	//Ratio: 1.6
	//Volume: 28.6% of the real module
	//Trimmed for 25% of the real volume

	RESOURCE
	{
		name = LiquidFuel
		amount = 900 // 1350 // 1872
		maxAmount = 900 // 1350 // 1872
	}

	RESOURCE
	{
		name = Oxidizer
		amount = 1100 // 1650 // 2288
		maxAmount = 1100 // 1650 // 2288
	}

	RESOURCE
	{
		name = ElectricCharge
		amount = 500
		maxAmount = 500
		isTweakable = false
		hideFlow = true
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.9
		maxDistance = 75
		falloff = 1.75
		thrustTransformName = thrustTransform
	}

	EFFECTS
	{
		running_closed
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_hard
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.2
				pitch = 1.0 1.0
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_veryLarge
				transformName = thrustTransform
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 4
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/ks25_Exhaust
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.5
				speed = 1.0 1.2
				localOffset = 0, 0, 4
				localscale = 1, 1, 1
			}
			
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}
}