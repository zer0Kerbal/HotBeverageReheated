PART
{
	// Hot Beverage Inc. - Kerpollo Service Module
	// At your service! Sometimes at least...
	// 

	// --- general parameters ---

	name = HB_ServiceModule_25
	module = Part
	author = ph34rb0t

	MODEL
	{
	model = HotBeverage/Parts/ServiceModule_25/KSM
	scale = 0.8,0.8,0.8
	}

	MODEL
	{
	model = HotBeverage/Parts/ServiceModule_25/KSP
	scale = 0.8, 0.8, 0.8
	position = 0.0, -2, 0.0
	}

	scale=1

	// --- node definitions ---
	node_stack_top = 0.0, 1.96, 0.0, 0.0, 1.0, 0.0, 3
	node_stack_bottom = 0.0, -2 , 0.0, 0.0, -1.0, 0.0, 3

	// --- editor parameters ---
	TechRequired = specializedControl
	entryCost = 10000
	cost = 8000
	category = Propulsion
	subcategory = 0
	title = KSM Service Module (2.5m)
	manufacturer = Hot Beverage Inc.
	description = The Kerpollo Service Module. Contains rocket fuel, RCS fuel, fuel cells, batteries and deployable antennae. Everything you need for your interstellar adventures! Warranty void if oxygen tanks are not being stirred regularly. Contains engine with a good thrust to weight ratio, good fuel consumption, good price, good looking and good in bed. Fly me to the Mun, baby!

	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,0,1,1,0

	// --- standard part parameters ---
	mass = 0.960
	dragModelType = default
	maximum_drag = 0.3
	minimum_drag = 0.3
	angularDrag = 2
	crashTolerance = 100
	maxTemp = 2400
	fuelCrossFeed = true

	//Fails at 30 tons at 5g ((30*5*9.81) /50)
	breakingForce = 30
	breakingTorque = 60

	stageOffset = 1
	childStageOffset = 1

	bulkheadProfiles = size2

	// Modules

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = #autoLOC_502022 //#autoLOC_502022 = Fuel Cell
		StartActionName = #autoLOC_502023 //#autoLOC_502023 = Start Fuel Cell
		StopActionName = #autoLOC_502024 //#autoLOC_502024 = Stop Fuel Cell
		ToggleActionName = #autoLOC_502025 //#autoLOC_502025 = Toggle Fuel Cell
		FillAmount = 0.95
		AutoShutdown = false
		GeneratesHeat = true
		UseSpecialistBonus = true
// convert to monoprop?
		INPUT_RESOURCE
		{
			ResourceName = LiquidFuel
			Ratio = 0.0016875
			FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE
		{
			ResourceName = Oxidizer
			Ratio = 0.0020625
			FlowMode = STAGE_PRIORITY_FLOW
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.5
			DumpExcess = false
		}
	}

	MODULE
	{
		name = ModuleAnimateGeneric
		animationName = Antenna
		animSwitch = true
		isOneShot = false
		startEventGUIName = Deploy Antennas
		endEventGUIName = Stow Antennas
	}

// Resources
	RESOURCE
	{
	 name = MonoPropellant
	 amount = 250
	 maxAmount = 250
	}

	//Ratio: 1.6
	//Volume: 28.6% of the real module
	//Trimmed for 25% of the real volume

	RESOURCE
	{
	 name = LiquidFuel
	 amount = 1872
	 maxAmount = 1872
	}

	RESOURCE
	{
	 name = Oxidizer
	 amount = 2288
	 maxAmount = 2288
	}

	RESOURCE
	{
		name = ElectricCharge
		amount = 0
		maxAmount = 9500
	}

	stagingIcon = LIQUID_ENGINE

	EFFECTS
	{
	  running_closed
	  {
		 AUDIO
		 {
			channel = Ship
			clip = sound_rocket_hard
			volume = 0.0 0.0
			volume = 1.0 1.0
			pitch = 0.0 0.2
			pitch = 1.0 1.0
			loop = true
		 }
		 PREFAB_PARTICLE
		 {
			prefabName = fx_smokeTrail_veryLarge
			transformName = thrustTransform
			emission = 0.05 0.0
			emission = 0.075 0.25
			emission = 1.0 1.25
			speed = 0.0 0.25
			speed = 1.0 1.0
			localOffset = 0, 0, 4
		 }
		 MODEL_MULTI_PARTICLE
		 {
			modelName = Squad/FX/ks25_Exhaust
			transformName = thrustTransform
			emission = 0.0 0.0
			emission = 0.05 0.0
			emission = 0.075 0.25
			emission = 1.0 1.25
			speed = 0.0 0.5
			speed = 1.0 1.2
			localOffset = 0, 0, 4
			localscale = 1, 1, 1
		 }
		
	  }
	  engage
	  {
		 AUDIO
		 {
			channel = Ship
			clip = sound_vent_soft
			volume = 1.0
			pitch = 2.0
			loop = false
		 }
	  }
	  flameout
	  {
		 PREFAB_PARTICLE
		 {
			prefabName = fx_exhaustSparks_flameout_2
			transformName = thrustTransform
			oneShot = true
		 }
		 AUDIO
		 {
			channel = Ship
			clip = sound_explosion_low
			volume = 1.0
			pitch = 2.0
			loop = false
		 }
	  }
	}

	MODULE
	{
		name = ModuleEnginesFX
		thrustVectorTransformName = thrustTransform
		runningEffectName = running_closed
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 23
		heatProduction = 100
		fxOffset = 0, 0, 0.8
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 0.9
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1.1
			DrawGauge = True
		}
		atmosphereCurve
		{
		 key = 0 312
		 key = 1 271
		}
		
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = thrustTransform
		gimbalRange = 1.0
	}

	MODULE
	{
		name = ModuleAlternator	
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.0
		}
	}

	MODULE
	{
		name = ModuleSAS
	}

	MODULE
	{
		name = ModuleReactionWheel
		
		PitchTorque = 30 // 300
		YawTorque = 30 // 300
		RollTorque = 30 // 300
		
		RESOURCE
		{
			name = ElectricCharge
			rate = 0.6 // adjust
		}
	}

	MODULE
	{
		name = ModuleDataTransmitter
		
		packetInterval = 0.18
		packetSize = 2
		
		packetResourceCost = 20.0
		requiredResource = ElectricCharge
			
		DeployFxModules = 0
	}
}